jQuery(document).ready(function($){function e(e){var t="undefined"==typeof e?l.hasClass("cart-open"):e;t?(l.removeClass("cart-open"),clearInterval(x),m.removeClass("visible"),r.find(".deleted").remove(),setTimeout(function(){s.scrollTop(0),0==Number(p.find("li").eq(0).text())&&l.addClass("empty")},500)):l.addClass("cart-open")}function t(e){var t=l.hasClass("empty");i(),a(t),d(e.data("price"),!0),l.removeClass("empty")}function i(){c+=1;var e=$('<li class="product"><div class="product-image"><a href="#0"><img src="img/cart_mini1.jpg" alt="placeholder" width="100px"></a></div><div class="product-details"><h3><a href="#0">Biustonosz</a></h3><span class="price">79.99 zł</span><div class="actions"><a href="#0" class="delete-item">Usuń</a><div class="quantity"><label for="cd-product-'+c+'">Ilość</label><span class="select"><select id="cd-product-'+c+'" name="quantity"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option></select></span></div></div></div></li>');r.prepend(e)}function n(e){clearInterval(x),r.find(".deleted").remove();var t=e.offset().top-s.children("ul").offset().top,i=Number(e.find(".quantity").find("select").val()),n=Number(e.find(".price").text().replace("$",""))*i;e.css("top",t+"px").addClass("deleted"),d(n,!1),a(!0,-i),m.addClass("visible"),x=setTimeout(function(){m.removeClass("visible"),r.find(".deleted").remove()},8e3)}function o(){var e=0,t=0;r.children("li:not(.deleted)").each(function(){var i=Number($(this).find("select").val());e+=i,t+=i*Number($(this).find(".price").text().replace("$",""))}),u.text(t.toFixed(2)),p.find("li").eq(0).text(e),p.find("li").eq(1).text(e+1)}function a(e,t){if("undefined"==typeof t){var i=Number(p.find("li").eq(0).text())+1,n=i+1;e?(p.find("li").eq(0).text(i),p.find("li").eq(1).text(n)):(p.addClass("update-count"),setTimeout(function(){p.find("li").eq(0).text(i)},150),setTimeout(function(){p.removeClass("update-count")},200),setTimeout(function(){p.find("li").eq(1).text(n)},230))}else{var i=Number(p.find("li").eq(0).text())+t,n=i+1;p.find("li").eq(0).text(i),p.find("li").eq(1).text(n)}}function d(e,t){t?u.text((Number(u.text())+Number(e)).toFixed(2)):u.text((Number(u.text())-Number(e)).toFixed(2))}var l=$(".cd-cart-container"),c=$(".lingerie-title");if(l.length>0){var s=l.find(".body"),r=s.find("ul").eq(0),u=l.find(".checkout").find("span"),f=l.children(".cd-cart-trigger"),p=f.children(".count"),v=$(".cd-add-to-cart"),m=l.find(".undo"),x;v.on("click",function(e){e.preventDefault(),t($(this))}),f.on("click",function(t){t.preventDefault(),e()}),l.on("click",function(t){$(t.target).is($(this))&&e(!0)}),r.on("click",".delete-item",function(e){e.preventDefault(),n($(e.target).parents(".product"))}),r.on("change","select",function(e){o()}),m.on("click","a",function(e){clearInterval(x),e.preventDefault(),r.find(".deleted").addClass("undo-deleted").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){$(this).off("webkitAnimationEnd oanimationend msAnimationEnd animationend").removeClass("deleted undo-deleted").removeAttr("style"),o()}),m.removeClass("visible")})}});